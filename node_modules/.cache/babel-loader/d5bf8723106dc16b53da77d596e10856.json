{"ast":null,"code":"import axios from 'axios';\nimport jwt_decode from 'jwt-decode';\nimport setAuthJWT from './setAuthJWT';\nexport const handleSubmitNewTask = (newTask, oldStateArray) => {\n  return new Promise((resolve, reject) => {\n    let token = localStorage.getItem('jwtToken');\n    let decoded = jwt_decode(token);\n    let newObj = {\n      todo: newTask,\n      id: decoded.id\n    };\n    let axiosConfig = {\n      headers: {\n        'Content-Type': 'application/json;charset=UTF-8',\n        'Access-Control-Allow-Origin': '*'\n      }\n    };\n    axios.post('http://localhost:3001/todo/createtodo', newObj, axiosConfig).then(newTodo => {\n      console.log(newTodo);\n      let currentTaskArray = [...oldStateArray];\n      currentTaskArray.push(newTodo.data);\n      resolve(currentTaskArray);\n    }).catch(error => {\n      reject(error);\n    });\n  });\n};\nexport const handleGetAllTodoApi = () => {\n  return new Promise((resolve, reject) => {\n    let token = localStorage.getItem('jwtToken');\n    let decoded = jwt_decode(token);\n    axios.get(\"http://localhost:3001/todo?id=\".concat(decoded.id)).then(result => {\n      resolve(result);\n    }).catch(error => {\n      reject(error);\n    });\n  });\n};\nexport const handleSignUpAndLogInApi = userInfo => {\n  return new Promise((resolve, reject) => {\n    let axiosConfig = {\n      headers: {\n        'Content-Type': 'application/json;charset=UTF-8',\n        'Access-Control-Allow-Origin': \"*\"\n      }\n    };\n    axios.post('http://localhost:3001/users/signupandlogin', userInfo, axiosConfig).then(result => {\n      const token = result.data.token;\n      localStorage.setItem('jwtToken', token);\n      const decoded = jwt_decode(token);\n      setAuthJWT(token);\n      resolve(decoded);\n    }).catch(error => {\n      reject(error);\n    });\n  });\n};\nexport const handleJWTExpirationApi = () => {\n  return new Promise((resolve, reject) => {\n    let token = localStorage.getItem('jwtToken');\n    let currentTime = Date.now() / 1000;\n    let decoded = jwt_decode(token);\n\n    if (decoded.exp < currentTime) {\n      localStorage.removeItem('jwtToken');\n      setAuthJWT(null);\n      reject(null);\n    } else {\n      setAuthJWT(token);\n      resolve(token);\n    }\n  });\n};\nexport const handleDeleteApi = todoID => {\n  return new Promise((resolve, reject) => {\n    let token = localStorage.getItem('jwtToken');\n    let decoded = jwt_decode(token);\n    axios.delete(\"http://localhost:3001/todo/deletetodobyid/\".concat(decoded.id, \"/\").concat(todoID)).then(todo => {\n      resolve(todo.data.todos);\n    }).catch(error => {\n      reject(error);\n    });\n  });\n};\nexport const handleEditApi = (id, currentTodoState) => {\n  return new Promise((resolve, reject) => {\n    let newObj = {\n      id,\n      newTodo: currentTodoState\n    };\n  });\n};","map":{"version":3,"sources":["/Users/pak/Desktop/react-term-3/react-day-2/todo/src/utils/api.js"],"names":["axios","jwt_decode","setAuthJWT","handleSubmitNewTask","newTask","oldStateArray","Promise","resolve","reject","token","localStorage","getItem","decoded","newObj","todo","id","axiosConfig","headers","post","then","newTodo","console","log","currentTaskArray","push","data","catch","error","handleGetAllTodoApi","get","result","handleSignUpAndLogInApi","userInfo","setItem","handleJWTExpirationApi","currentTime","Date","now","exp","removeItem","handleDeleteApi","todoID","delete","todos","handleEditApi","currentTodoState"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,UAAP,MAAuB,YAAvB;AACA,OAAOC,UAAP,MAAuB,cAAvB;AAEA,OAAO,MAAMC,mBAAmB,GAAG,CAACC,OAAD,EAAUC,aAAV,KAA4B;AAC3D,SAAO,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AAEpC,QAAIC,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAZ;AACA,QAAIC,OAAO,GAAGX,UAAU,CAACQ,KAAD,CAAxB;AAEA,QAAII,MAAM,GAAG;AACTC,MAAAA,IAAI,EAAEV,OADG;AAETW,MAAAA,EAAE,EAAEH,OAAO,CAACG;AAFH,KAAb;AAKA,QAAIC,WAAW,GAAG;AACdC,MAAAA,OAAO,EAAE;AACL,wBAAgB,gCADX;AAEL,uCAA+B;AAF1B;AADK,KAAlB;AAOAjB,IAAAA,KAAK,CAACkB,IAAN,CAAW,uCAAX,EAAoDL,MAApD,EAA4DG,WAA5D,EACMG,IADN,CACYC,OAAO,IAAI;AACfC,MAAAA,OAAO,CAACC,GAAR,CAAYF,OAAZ;AACA,UAAIG,gBAAgB,GAAG,CAAC,GAAGlB,aAAJ,CAAvB;AACAkB,MAAAA,gBAAgB,CAACC,IAAjB,CAAsBJ,OAAO,CAACK,IAA9B;AACAlB,MAAAA,OAAO,CAACgB,gBAAD,CAAP;AAEF,KAPN,EAQMG,KARN,CAQaC,KAAK,IAAI;AACdnB,MAAAA,MAAM,CAACmB,KAAD,CAAN;AACF,KAVN;AAaH,GA9BM,CAAP;AA+BH,CAhCM;AAoCP,OAAO,MAAMC,mBAAmB,GAAG,MAAM;AAErC,SAAO,IAAItB,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AAEpC,QAAIC,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAZ;AACA,QAAIC,OAAO,GAAGX,UAAU,CAACQ,KAAD,CAAxB;AAEAT,IAAAA,KAAK,CAAC6B,GAAN,yCAA2CjB,OAAO,CAACG,EAAnD,GACMI,IADN,CACYW,MAAM,IAAI;AACdvB,MAAAA,OAAO,CAACuB,MAAD,CAAP;AACF,KAHN,EAIMJ,KAJN,CAIaC,KAAK,IAAI;AACdnB,MAAAA,MAAM,CAACmB,KAAD,CAAN;AACF,KANN;AAOH,GAZM,CAAP;AAaH,CAfM;AAiBP,OAAO,MAAMI,uBAAuB,GAAIC,QAAD,IAAc;AAEjD,SAAO,IAAI1B,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AAEpC,QAAIQ,WAAW,GAAG;AACdC,MAAAA,OAAO,EAAE;AACL,wBAAgB,gCADX;AAEL,uCAA+B;AAF1B;AADK,KAAlB;AAOAjB,IAAAA,KAAK,CAACkB,IAAN,CAAW,4CAAX,EAAyDc,QAAzD,EAAmEhB,WAAnE,EACMG,IADN,CACYW,MAAM,IAAI;AAAA,YAENrB,KAFM,GAEIqB,MAAM,CAACL,IAFX,CAENhB,KAFM;AAIdC,MAAAA,YAAY,CAACuB,OAAb,CAAqB,UAArB,EAAiCxB,KAAjC;AAEA,YAAMG,OAAO,GAAGX,UAAU,CAACQ,KAAD,CAA1B;AAEAP,MAAAA,UAAU,CAACO,KAAD,CAAV;AAEAF,MAAAA,OAAO,CAACK,OAAD,CAAP;AAEF,KAbN,EAcMc,KAdN,CAcaC,KAAK,IAAI;AACbnB,MAAAA,MAAM,CAACmB,KAAD,CAAN;AACH,KAhBN;AAmBH,GA5BM,CAAP;AA6BH,CA/BM;AAiCP,OAAO,MAAMO,sBAAsB,GAAG,MAAM;AAExC,SAAO,IAAI5B,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AAEpC,QAAIC,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAZ;AACA,QAAIwB,WAAW,GAAGC,IAAI,CAACC,GAAL,KAAa,IAA/B;AACA,QAAIzB,OAAO,GAAGX,UAAU,CAACQ,KAAD,CAAxB;;AAEA,QAAIG,OAAO,CAAC0B,GAAR,GAAcH,WAAlB,EAA+B;AAC3BzB,MAAAA,YAAY,CAAC6B,UAAb,CAAwB,UAAxB;AACArC,MAAAA,UAAU,CAAC,IAAD,CAAV;AACAM,MAAAA,MAAM,CAAC,IAAD,CAAN;AACH,KAJD,MAIO;AACHN,MAAAA,UAAU,CAACO,KAAD,CAAV;AACAF,MAAAA,OAAO,CAACE,KAAD,CAAP;AACH;AACJ,GAdM,CAAP;AAeH,CAjBM;AAmBP,OAAO,MAAM+B,eAAe,GAAIC,MAAD,IAAY;AAEvC,SAAO,IAAInC,OAAJ,CAAa,CAACC,OAAD,EAAUC,MAAV,KAAqB;AAErC,QAAIC,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAZ;AACA,QAAIC,OAAO,GAAGX,UAAU,CAACQ,KAAD,CAAxB;AAEAT,IAAAA,KAAK,CAAC0C,MAAN,qDAA0D9B,OAAO,CAACG,EAAlE,cAAwE0B,MAAxE,GACMtB,IADN,CACYL,IAAI,IAAI;AAEZP,MAAAA,OAAO,CAACO,IAAI,CAACW,IAAL,CAAUkB,KAAX,CAAP;AAEF,KALN,EAMMjB,KANN,CAMaC,KAAK,IAAI;AACbnB,MAAAA,MAAM,CAACmB,KAAD,CAAN;AACH,KARN;AAWH,GAhBM,CAAP;AAkBH,CApBM;AAsBP,OAAO,MAAMiB,aAAa,GAAG,CAAC7B,EAAD,EAAK8B,gBAAL,KAA0B;AAEnD,SAAO,IAAIvC,OAAJ,CAAa,CAACC,OAAD,EAAUC,MAAV,KAAqB;AAErC,QAAIK,MAAM,GAAG;AACTE,MAAAA,EADS;AAETK,MAAAA,OAAO,EAAEyB;AAFA,KAAb;AAKH,GAPM,CAAP;AAQH,CAVM","sourcesContent":["import axios from 'axios';\nimport jwt_decode from 'jwt-decode';\nimport setAuthJWT from './setAuthJWT';\n\nexport const handleSubmitNewTask = (newTask, oldStateArray) => {\n    return new Promise((resolve, reject) => {\n\n        let token = localStorage.getItem('jwtToken');\n        let decoded = jwt_decode(token);\n\n        let newObj = {\n            todo: newTask,\n            id: decoded.id\n          }\n\n        let axiosConfig = {\n            headers: {\n                'Content-Type': 'application/json;charset=UTF-8',\n                'Access-Control-Allow-Origin': '*'\n            }\n        }\n\n        axios.post('http://localhost:3001/todo/createtodo', newObj, axiosConfig)\n             .then( newTodo => {\n                console.log(newTodo)\n                let currentTaskArray = [...oldStateArray];\n                currentTaskArray.push(newTodo.data);\n                resolve(currentTaskArray);\n\n             })\n             .catch( error => {\n                reject(error)\n             })\n\n\n    });\n}\n\n\n\nexport const handleGetAllTodoApi = () => {\n\n    return new Promise((resolve, reject) => {\n\n        let token = localStorage.getItem('jwtToken');\n        let decoded = jwt_decode(token);\n\n        axios.get(`http://localhost:3001/todo?id=${decoded.id}`)\n             .then( result => {\n                resolve(result);\n             })\n             .catch( error => {\n                reject(error);\n             });\n    });\n}\n\nexport const handleSignUpAndLogInApi = (userInfo) => {\n\n    return new Promise((resolve, reject) => {\n\n        let axiosConfig = {\n            headers: {\n                'Content-Type': 'application/json;charset=UTF-8',\n                'Access-Control-Allow-Origin': \"*\"\n            }\n        };\n\n        axios.post('http://localhost:3001/users/signupandlogin', userInfo, axiosConfig)\n             .then( result => {\n\n                const { token } = result.data;\n\n                localStorage.setItem('jwtToken', token);\n\n                const decoded = jwt_decode(token);\n\n                setAuthJWT(token);\n\n                resolve(decoded);\n\n             })\n             .catch( error => {\n                 reject(error);\n             })\n    \n\n    });\n}\n\nexport const handleJWTExpirationApi = () => {\n\n    return new Promise((resolve, reject) => {\n\n        let token = localStorage.getItem('jwtToken');\n        let currentTime = Date.now() / 1000;\n        let decoded = jwt_decode(token);\n\n        if (decoded.exp < currentTime) {\n            localStorage.removeItem('jwtToken');\n            setAuthJWT(null);\n            reject(null);\n        } else {\n            setAuthJWT(token);\n            resolve(token);\n        }\n    });\n}\n\nexport const handleDeleteApi = (todoID) => {\n\n    return new Promise( (resolve, reject) => {\n\n        let token = localStorage.getItem('jwtToken');\n        let decoded = jwt_decode(token);\n\n        axios.delete(`http://localhost:3001/todo/deletetodobyid/${decoded.id}/${todoID}`)\n             .then( todo => {\n\n                resolve(todo.data.todos);\n\n             })\n             .catch( error => {\n                 reject(error);\n             })\n\n\n    });\n\n}\n\nexport const handleEditApi = (id, currentTodoState) => {\n\n    return new Promise( (resolve, reject) => {\n\n        let newObj = {\n            id, \n            newTodo: currentTodoState\n        }\n\n    })\n}"]},"metadata":{},"sourceType":"module"}